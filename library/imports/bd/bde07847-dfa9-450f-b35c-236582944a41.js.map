{"version":3,"sources":["../../../../assets/scripts/assets/scripts/Square.js"],"names":["squareState","cc","Enum","OPEN","CLOSE","Class","extends","Component","properties","index","type","GameController","require","labelIndex","default","Label","labelType","defaultSprite","SpriteFrame","spriteOpen","state","onLoad","node","on","initInfor","reuse","openSquare","resetSquare","matchSquare","touchSquare","squareType","showIndex","fadeIn","runAction","log","onClickSquare","clickItemEvent","Event","EventCustom","setUserData","dispatchEvent","evt","Sprite","string","scaleIn","scaleTo","scaleOut","sequence","callFunc","active","getComponent","spriteFrame","zIndex","getType","getIndex","unuse","scaleX","scaleY"],"mappings":"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","file":"Square.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["\nvar squareState;\nsquareState = cc.Enum({\n  OPEN: 0,\n  CLOSE: 1\n});\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        index: 0,\n        type: 0,\n\n        GameController : require(\"GameController\"),\n        labelIndex: {\n            default : null,\n            type: cc.Label\n        },\n        labelType: {\n            default : null,\n            type: cc.Label\n        },\n        defaultSprite: {\n            default: null,\n            type: cc.SpriteFrame\n        },\n        spriteOpen: {\n            default: null,\n            type: cc.SpriteFrame\n        },\n        state: {\n            default: squareState.CLOSE,\n            type:squareState\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.state = squareState.CLOSE;\n        this.node.on(\"INIT_INFO\", this.initInfor, this);\n        this.node.on(\"REUSE\", this.reuse, this);\n        this.node.on(\"OPEN_SQUARE\", this.openSquare, this);\n        this.node.on(\"RESET_SQUARE\", this.resetSquare, this);\n        this.node.on(\"MATCH_SQUARE\", this.matchSquare, this);\n        this.node.on(\"TOUCH_SQUARE\",this.touchSquare,this);\n        this.node.on(\"GET_TYPE\",this.squareType,this);\n\n        this.node.on(\"SHOW_INDEX\",this.showIndex,this);\n\n        // this.node.on(cc.Node.EventType.TOUCH_START,this.touchSquare,this);\n\n       \n        let fadeIn = cc.fadeIn(0.1);\n        this.node.runAction(fadeIn);\n    },\n\n    showIndex(){\n        cc.log(\"index: \" + this.index);\n    },\n\n\n    onClickSquare(){\n        this.clickItemEvent = new cc.Event.EventCustom('ON_TYPE', true);\n        this.clickItemEvent.setUserData({\n            type: this.type,\n        });\n        this.node.dispatchEvent(this.clickItemEvent);\n    },\n\n\n    squareType(evt){\n        cc.log(\"type: \" + this.type);\n    },\n\n\n    initInfor(index, type, Sprite, GameController){\n        this.index = index;\n        this.type = type;\n        this.spriteOpen = Sprite;\n        this.GameController = GameController;\n\n        this.labelIndex.string = index;\n        this.labelType.string = type;\n    },\n\n    touchSquare(){\n        if(this.state === squareState.CLOSE)\n            this.openSquare();\n\n        // this.GameController.pushToTempSquares(this);\n        // this.GameController.emit(\"PUSH_TEMP\",this);\n    },\n\n\n    openSquare(){\n        this.state = squareState.OPEN;\n        let scaleIn = cc.scaleTo(0.3,0,1);\n        let scaleOut = cc.scaleTo(0.3,1,1);\n        let sequence = cc.sequence(\n                scaleIn,\n                cc.callFunc(()=>{\n                    this.labelIndex.node.active = false;\n                    this.node.getComponent(cc.Sprite).spriteFrame = this.spriteOpen;                    \n                }),\n                scaleOut);\n        this.node.runAction(sequence);\n    },\n\n    resetSquare(){\n        this.state = squareState.CLOSE;\n        let scaleIn = cc.scaleTo(0.3,0,1);\n        let scaleOut = cc.scaleTo(0.3,1,1);\n        let sequence = cc.sequence(\n                scaleIn,\n                cc.callFunc(()=>{\n                    this.labelIndex.node.active = true;\n                    this.node.getComponent(cc.Sprite).spriteFrame = this.defaultSprite;                    \n                }),\n                scaleOut);\n        this.node.runAction(sequence);\n    },\n\n    matchSquare(){\n        this.node.zIndex = 1;\n        let scaleIn = cc.scaleTo(0.5,2,2);\n        this.node.runAction(scaleIn);\n\n    },\n\n    getType(){\n        return this.type;\n    },\n\n    getIndex(){\n        return this.index;\n    },\n\n    unuse(){\n    },\n\n    reuse(){\n        this.node.scaleX = 1;\n        this.node.scaleY = 1;\n        this.state = squareState.CLOSE;\n        this.labelIndex.node.active = true;\n        this.node.getComponent(cc.Sprite).spriteFrame = this.defaultSprite;  \n    }\n\n   \n});\n\n\n"]}